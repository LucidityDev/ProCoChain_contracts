const { expect } = require("chai");
const { abi: abiNeg } = require("../artifacts/contracts/BidTracking.sol/BidTracker.json");
const { abi: abiSF } = require("../superfluidartifacts/Superfluid.json");
const { abi: abiSFT } = require("../superfluidartifacts/SuperToken.json");
const { abi: abiSFCF } = require("../superfluidartifacts/ConstantFlowAgreementV1.json");

const { ethers } = require("hardhat");

describe("Internet Bid Lucidity Full Feature Test", function () {
  let BidFactory, Dai, CT, SF, SFT,SFCF;
  let owner, bidder, auditor, funder;

  it("deploy factory contracts", async function () {
     [owner, bidder, auditor] = await ethers.getSigners(); //jsonrpc signers from default 20 accounts with 10000 ETH each

    //conditional tokens
    const CTContract = await ethers.getContractFactory("ConditionalTokens"); //contract name here
    CT = await CTContract.deploy();

    //using Dai contract 
    const DaiContract = await ethers.getContractFactory("Dai");
    Dai = await DaiContract.connect(owner).deploy(ethers.BigNumber.from("0"));
    await Dai.connect(owner).mint(owner.getAddress(),ethers.BigNumber.from("100")) //mint to 
    
    const daibalance = await Dai.balanceOf(owner.getAddress());
    console.log("owner address: ", await owner.getAddress());
    console.log("owner balance of Dai: ", daibalance.toString());
  
    //deploy neg contract
    const BidFactoryContract = await ethers.getContractFactory(
      "BidTrackerFactory"
    );
    BidFactory = await BidFactoryContract.deploy();

    //getting contract factory for SF and SFT
    //#region 
    const SFCFContract = new ethers.ContractFactory(
      abiSFCF,"0x608060405234801561001057600080fd5b50612b0e806100206000396000f3fe608060405234801561001057600080fd5b50600436106100885760003560e01c8063aabd26681161005b578063aabd266814610292578063b4b333c6146102e7578063e6a1e88814610376578063e8e7e2d1146103ae57610088565b806350209a621461008d57806362fc305e146101935780637730599e146102245780639b2e48bc1461023e575b600080fd5b61011e600480360360808110156100a357600080fd5b6001600160a01b0382358116926020810135909116916040820135600b0b9190810190608081016060820135600160201b8111156100e057600080fd5b8201836020820111156100f257600080fd5b803590602001918460018302840111600160201b8311171561011357600080fd5b5090925090506103f3565b6040805160208082528351818301528351919283929083019185019080838360005b83811015610158578181015183820152602001610140565b50505050905090810190601f1680156101855780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b61011e600480360360808110156101a957600080fd5b6001600160a01b0382358116926020810135909116916040820135600b0b9190810190608081016060820135600160201b8111156101e657600080fd5b8201836020820111156101f857600080fd5b803590602001918460018302840111600160201b8311171561021957600080fd5b50909250905061074c565b61022c610a32565b60408051918252519081900360200190f35b6102746004803603606081101561025457600080fd5b506001600160a01b03813581169160208101359091169060400135610a56565b60408051938452602084019290925282820152519081900360600190f35b6102be600480360360408110156102a857600080fd5b506001600160a01b038135169060200135610ab4565b60408051948552600b9390930b6020850152838301919091526060830152519081900360800190f35b61011e600480360360808110156102fd57600080fd5b6001600160a01b0382358116926020810135821692604082013590921691810190608081016060820135600160201b81111561033857600080fd5b82018360208201111561034a57600080fd5b803590602001918460018302840111600160201b8311171561036b57600080fd5b509092509050610af0565b6102be6004803603606081101561038c57600080fd5b506001600160a01b038135811691602081013582169160409091013516610d7a565b6103dc600480360360408110156103c457600080fd5b506001600160a01b0381358116916020013516610dfd565b60408051600b9290920b8252519081900360200190f35b6060336001600160a01b0316866001600160a01b03166320bc44256040518163ffffffff1660e01b815260040160206040518083038186803b15801561043857600080fd5b505afa15801561044c573d6000803e3d6000fd5b505050506040513d602081101561046257600080fd5b50516001600160a01b0316146104b0576040805162461bcd60e51b815260206004820152600e60248201526d139bdd0814dd5c195c999b1d5a5960921b604482015290519081900360640190fd5b6104b8612979565b6104f83385858080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250610e2092505050565b9050600061050a826020015188610f34565b90506105168882611018565b1561055d576040805162461bcd60e51b8152602060048201526012602482015271119b1bddc8191bd95cdb89dd08195e1a5cdd60721b604482015290519081900360640190fd5b60408051631e51d6a760e11b81526001600160a01b038916600482015290513391633ca3ad4e916024808301926020929190829003018186803b1580156105a357600080fd5b505afa1580156105b7573d6000803e3d6000fd5b505050506040513d60208110156105cd57600080fd5b5051156106f157606061061c338a88888080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152503092508e915088905061102f565b94509050600061062a6129ad565b61063d8b8587602001518d8d600061105f565b925050915061064e33878c856113e6565b955061065f338c88308e89896114ce565b9550610669612979565b6106733388610e20565b90508560400151600014801561068b57506060860151155b156106a65760608082015160408401526000908301526106cb565b604080830184905286015183106106c357856040015183036106c5565b825b60608301525b6106db8c838360200151886114fb565b6106e6338883611697565b965050505050610741565b610704888284602001518a8a600161105f565b50505084848080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509295505050505b505095945050505050565b6060336001600160a01b0316866001600160a01b03166320bc44256040518163ffffffff1660e01b815260040160206040518083038186803b15801561079157600080fd5b505afa1580156107a5573d6000803e3d6000fd5b505050506040513d60208110156107bb57600080fd5b50516001600160a01b031614610809576040805162461bcd60e51b815260206004820152600e60248201526d139bdd0814dd5c195c999b1d5a5960921b604482015290519081900360640190fd5b610811612979565b6108513385858080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250610e2092505050565b90506000610863826020015188610f34565b905061086f8882611018565b6108b5576040805162461bcd60e51b8152602060048201526012602482015271119b1bddc8185b1c9958591e48195e1a5cdd60721b604482015290519081900360640190fd5b60408051631e51d6a760e11b81526001600160a01b038916600482015290513391633ca3ad4e916024808301926020929190829003018186803b1580156108fb57600080fd5b505afa15801561090f573d6000803e3d6000fd5b505050506040513d602081101561092557600080fd5b5051806109a2575060208281015160408051631e51d6a760e11b81526001600160a01b039092166004830152513392633ca3ad4e9260248082019391829003018186803b15801561097557600080fd5b505afa158015610989573d6000803e3d6000fd5b505050506040513d602081101561099f57600080fd5b50515b156106f15760606109ef338a88888080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152503092508e915088905061185c565b9450905060006109fd6129ad565b610a108b8587602001518d8d600061105f565b9250509150610a2133878c856113e6565b955061065f338c88308e898961187c565b7fa9214cc96615e0085d3bb077758db69497dc2dce3b2b1e97bc93c3d18d83efd390565b600080600080610a646129ad565b610a6e888861189d565b915091508115610aa95760208101518151610a9891600b0b90610a92908990611a42565b90611aae565b945080604001519350806060015192505b505093509350939050565b600080600080610ac26129ad565b610acc8787611b57565b805160208201516040830151606090930151919b909a509198509650945050505050565b6060336001600160a01b0316866001600160a01b03166320bc44256040518163ffffffff1660e01b815260040160206040518083038186803b158015610b3557600080fd5b505afa158015610b49573d6000803e3d6000fd5b505050506040513d6020811015610b5f57600080fd5b50516001600160a01b031614610bad576040805162461bcd60e51b815260206004820152600e60248201526d139bdd0814dd5c195c999b1d5a5960921b604482015290519081900360640190fd5b6000610bef3385858080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250610e2092505050565b6020015190506000610c018787610f34565b90506000876001600160a01b0316836001600160a01b031614158015610c395750866001600160a01b0316836001600160a01b031614155b90508015610cf557886001600160a01b0316638fb4c995896040518263ffffffff1660e01b815260040180826001600160a01b0316815260200191505060206040518083038186803b158015610c8e57600080fd5b505afa158015610ca2573d6000803e3d6000fd5b505050506040513d6020811015610cb857600080fd5b5051610cf55760405162461bcd60e51b8152600401808060200182810382526021815260200180612ab86021913960400191505060405180910390fd5b6060610d3d338b89898080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152503092508e9150899050611bb9565b95509050610d4e8a858b8b86611bda565b610d5b33868a60006113e6565b9450610d6c338b87308c8887611ddd565b9a9950505050505050505050565b600080600080610d886129ad565b610dd888888860405160200180836001600160a01b031660601b8152601401826001600160a01b031660601b81526014019250505060405160208183030381529060405280519060200120611b57565b805160208201516040830151606090930151919c909b50919950975095505050505050565b6000610e076129ad565b610e11848461189d565b60200151925050505b92915050565b610e28612979565b604051631fb6491d60e11b81526020600482018181528451602484015284516001600160a01b03871693633f6c923a9387939283926044019185019080838360005b83811015610e82578181015183820152602001610e6a565b50505050905090810190601f168015610eaf5780820380516001836020036101000a031916815260200191505b509250505060a06040518083038186803b158015610ecc57600080fd5b505afa158015610ee0573d6000803e3d6000fd5b505050506040513d60a0811015610ef657600080fd5b5060208082015160408084015160608086015160809096015190870152908501939093526001600160a01b039092169083015260ff16815292915050565b60006001600160a01b038316610f82576040805162461bcd60e51b815260206004820152600e60248201526d53656e646572206973207a65726f60901b604482015290519081900360640190fd5b6001600160a01b038216610fd0576040805162461bcd60e51b815260206004820152601060248201526f5265636569766572206973207a65726f60801b604482015290519081900360640190fd5b50604080516bffffffffffffffffffffffff19606094851b81166020808401919091529390941b90931660348401528051602881850301815260489093019052815191012090565b6000806110258484611b57565b5015949350505050565b6060806110506305b3926760e31b6404000000008a8a8a8a8a8a6000611dfe565b91509150965096945050505050565b60008061106a6129ad565b856001600160a01b0316876001600160a01b031614156110bb5760405162461bcd60e51b8152600401808060200182810382526024815260200180612a1c6024913960400191505060405180910390fd5b84600b0b60001415611114576040805162461bcd60e51b815260206004820152601e60248201527f466c6f7741677265656d656e743a207573652064656c65746520666c6f770000604482015290519081900360640190fd5b600085600b0b136111565760405162461bcd60e51b815260040180806020018281038252602d815260200180612a40602d913960400191505060405180910390fd5b61115e6129ad565b6111688a8a611b57565b9150506111788a87600b0b612249565b935084156112455760008a6001600160a01b031663eb3537cc8a426040518363ffffffff1660e01b815260040180836001600160a01b031681526020018281526020019250505060606040518083038186803b1580156111d757600080fd5b505afa1580156111eb573d6000803e3d6000fd5b505050506040513d606081101561120157600080fd5b505190508481136112435760405162461bcd60e51b81526004018080602001828103825260218152602001806129fb6021913960400191505060405180910390fd5b505b604051806080016040528042815260200187600b0b81526020018661126b57600061126d565b855b815260200160008152509150896001600160a01b03166312a6a3f88a611292856122dd565b6040518363ffffffff1660e01b81526004018083815260200180602001828103825283818151815260200191508051906020019060200280838360005b838110156112e75781810151838201526020016112cf565b505050509050019350505050600060405180830381600087803b15801561130d57600080fd5b505af1158015611321573d6000803e3d6000fd5b50505050600061134d8b8a84602001518a0360000389611342576000611344565b885b60006001612351565b905060006113678c8a85602001518b036000806001612351565b9050886001600160a01b03168a6001600160a01b03168d6001600160a01b03167faf1e675078c9d2b1ccdeb021c1d7edf896c0686ee7ce98db1d9cce5009babbb88b86866040518084600b0b815260200183600b0b815260200182600b0b8152602001935050505060405180910390a450505096509650969350505050565b6060816113f45750826114c6565b6113fc612979565b6114068686610e20565b90506000866001600160a01b03166313349046866040518263ffffffff1660e01b815260040180826001600160a01b0316815260200191505060206040518083038186803b15801561145757600080fd5b505afa15801561146b573d6000803e3d6000fd5b505050506040513d602081101561148157600080fd5b5051604083015160ff9091169150841161149b57836114a3565b816040015184035b606083018051909101905280840260408301526114c1878784611697565b925050505b949350505050565b60606114ef636d1ba08f60e11b6408000000008a8a8a8a8a8a8a6000612506565b98975050505050505050565b836001600160a01b031663a1b2bf8b82611514866122dd565b6040518363ffffffff1660e01b81526004018083815260200180602001828103825283818151815260200191508051906020019060200280838360005b83811015611569578181015183820152602001611551565b505050509050019350505050600060405180830381600087803b15801561158f57600080fd5b505af11580156115a3573d6000803e3d6000fd5b505050506000846001600160a01b031663eb3537cc84426040518363ffffffff1660e01b815260040180836001600160a01b031681526020018281526020019250505060606040518083038186803b1580156115fe57600080fd5b505afa158015611612573d6000803e3d6000fd5b505050506040513d606081101561162857600080fd5b50516040850151606086015191925090038112156116775760405162461bcd60e51b81526004018080602001828103825260218152602001806129fb6021913960400191505060405180910390fd5b61168f85846000876040015188606001516000612351565b505050505050565b6060836001600160a01b03166318a1d3de848460000151856040015186606001516040518563ffffffff1660e01b815260040180806020018560ff168152602001848152602001838152602001828103825286818151815260200191508051906020019080838360005b83811015611719578181015183820152602001611701565b50505050905090810190601f1680156117465780820380516001836020036101000a031916815260200191505b5095505050505050600060405180830381600087803b15801561176857600080fd5b505af115801561177c573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405260208110156117a557600080fd5b8101908080516040519392919084600160201b8211156117c457600080fd5b9083019060208201858111156117d957600080fd5b8251600160201b8111828201881017156117f257600080fd5b82525081516020918201929091019080838360005b8381101561181f578181015183820152602001611807565b50505050905090810190601f16801561184c5780820380516001836020036101000a031916815260200191505b5060405250505090509392505050565b60608061105063bd2da4a360e01b600160201b8a8a8a8a8a8a6000611dfe565b60606114ef63d002c9a560e01b6402000000008a8a8a8a8a8a8a6000612506565b60006118a76129ad565b60408051634b61cc3360e01b81523060048201526001600160a01b03858116602483015260006044830181905260016064840152925160609391881692634b61cc33926084808301939192829003018186803b15801561190657600080fd5b505afa15801561191a573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052602081101561194357600080fd5b8101908080516040519392919084600160201b82111561196257600080fd5b90830190602082018581111561197757600080fd5b82518660208202830111600160201b8211171561199357600080fd5b82525081516020918201928201910280838360005b838110156119c05781810151838201526020016119a8565b5050505090500160405250505090506000816000815181106119de57fe5b602002602001015160001c90506000811193508315611a395760e081901c83526bffffffffffffffffffffffff608082901c16600b90810b900b602084015267ffffffffffffffff604082811c821690850152811660608401525b50509250929050565b6000818303818312801590611a575750838113155b80611a6c5750600083128015611a6c57508381135b611aa75760405162461bcd60e51b8152600401808060200182810382526024815260200180612a946024913960400191505060405180910390fd5b9392505050565b600082611abd57506000610e1a565b82600019148015611ad15750600160ff1b82145b15611b0d5760405162461bcd60e51b8152600401808060200182810382526027815260200180612a6d6027913960400191505060405180910390fd5b82820282848281611b1a57fe5b0514611aa75760405162461bcd60e51b8152600401808060200182810382526027815260200180612a6d6027913960400191505060405180910390fd5b6000611b616129ad565b60408051636c2d9f2f60e01b8152306004820152602481018590526001604482015290516060916001600160a01b03871691636c2d9f2f91606480820192600092909190829003018186803b15801561190657600080fd5b606080611050630beeb46760e11b6410000000008a8a8a8a8a8a6001611dfe565b6000611be68484610f34565b90506000611bf26129ad565b611bfc8884611b57565b9150915081611c3c5760405162461bcd60e51b81526004018080602001828103825260228152602001806129d96022913960400191505060405180910390fd5b6000611c5f89888460200151856040015160000386606001516000036001612351565b600b0b90506000611c7d8a8885602001516000036000806001612351565b600b0b9050896001600160a01b031663270483978660016040518363ffffffff1660e01b81526004018083815260200182815260200192505050600060405180830381600087803b158015611cd157600080fd5b505af1158015611ce5573d6000803e3d6000fd5b505050508515611d7c57896001600160a01b0316638960bb198a878b87604001516040518563ffffffff1660e01b815260040180856001600160a01b03168152602001848152602001836001600160a01b03168152602001828152602001945050505050600060405180830381600087803b158015611d6357600080fd5b505af1158015611d77573d6000803e3d6000fd5b505050505b60408051600081526020810184905280820183905290516001600160a01b03808a16928b821692918e16917faf1e675078c9d2b1ccdeb021c1d7edf896c0686ee7ce98db1d9cce5009babbb89181900360600190a450505050505050505050565b60606114ef63be6baf9b60e01b6420000000008a8a8a8a8a8a8a6001612506565b6060808690506000808a6001600160a01b031663f9f522f4886040518263ffffffff1660e01b815260040180826001600160a01b03168152602001915050604080518083038186803b158015611e5357600080fd5b505afa158015611e67573d6000803e3d6000fd5b505050506040513d6040811015611e7d57600080fd5b5080516020909101519092509050818015611e985750808c16155b156122395760608d8b8b8b8a60405160240180856001600160a01b0316815260200180602001846001600160a01b03168152602001838152602001828103825285818151815260200191508051906020019080838360005b83811015611f08578181015183820152602001611ef0565b50505050905090810190601f168015611f355780820380516001836020036101000a031916815260200191505b5095505050505050604051602081830303815290604052906001600160e01b0319166020820180516001600160e01b03838183161783525050505090508b6001600160a01b03166374041e028983898e6040518563ffffffff1660e01b815260040180856001600160a01b0316815260200180602001841515815260200180602001838103835286818151815260200191508051906020019080838360005b83811015611fec578181015183820152602001611fd4565b50505050905090810190601f1680156120195780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b8381101561204c578181015183820152602001612034565b50505050905090810190601f1680156120795780820380516001836020036101000a031916815260200191505b509650505050505050600060405180830381600087803b15801561209c57600080fd5b505af11580156120b0573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160409081528110156120d957600080fd5b8101908080516040519392919084600160201b8211156120f857600080fd5b90830190602082018581111561210d57600080fd5b8251600160201b81118282018810171561212657600080fd5b82525081516020918201929091019080838360005b8381101561215357818101518382015260200161213b565b50505050905090810190601f1680156121805780820380516001836020036101000a031916815260200191505b5060405260200180516040519392919084600160201b8211156121a257600080fd5b9083019060208201858111156121b757600080fd5b8251600160201b8111828201881017156121d057600080fd5b82525081516020918201929091019080838360005b838110156121fd5781810151838201526020016121e5565b50505050905090810190601f16801561222a5780820380516001836020036101000a031916815260200191505b50604052509297509095505050505b5050995099975050505050505050565b60008061225461290d565b90506000816001600160a01b031663bf9149f2866040518263ffffffff1660e01b815260040180826001600160a01b0316815260200191505060206040518083038186803b1580156122a557600080fd5b505afa1580156122b9573d6000803e3d6000fd5b505050506040513d60208110156122cf57600080fd5b505193909302949350505050565b60408051600180825281830190925260609160208083019080368337019050509050816060015160408360400151901b608084602001516bffffffffffffffffffffffff16901b60e08560000151901b17171760001b8160008151811061234057fe5b602002602001018181525050919050565b60008061235c6129ad565b612366898961189d565b915091508180156123745750835b1561241057600061239d8260200151600b0b610a92846000015142611a4290919063ffffffff16565b9050896001600160a01b031663cf97256d8a836040518363ffffffff1660e01b815260040180836001600160a01b0316815260200182815260200192505050600060405180830381600087803b1580156123f657600080fd5b505af115801561240a573d6000803e3d6000fd5b50505050505b6020810180518801600b90810b900b905242815260408101805187019052606081018051860190526001600160a01b03891663090c415e896000612453856122dd565b6040518463ffffffff1660e01b815260040180846001600160a01b0316815260200183815260200180602001828103825283818151815260200191508051906020019060200280838360005b838110156124b757818101518382015260200161249f565b50505050905001945050505050600060405180830381600087803b1580156124de57600080fd5b505af11580156124f2573d6000803e3d6000fd5b505050506020015198975050505050505050565b60606000808a6001600160a01b031663f9f522f4886040518263ffffffff1660e01b815260040180826001600160a01b03168152602001915050604080518083038186803b15801561255757600080fd5b505afa15801561256b573d6000803e3d6000fd5b505050506040513d604081101561258157600080fd5b508051602090910151909250905081801561259c5750808c16155b156128fc5760608d8b8b8b8a8a60405160240180866001600160a01b0316815260200180602001856001600160a01b0316815260200184815260200180602001838103835287818151815260200191508051906020019080838360005b838110156126115781810151838201526020016125f9565b50505050905090810190601f16801561263e5780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b83811015612671578181015183820152602001612659565b50505050905090810190601f16801561269e5780820380516001836020036101000a031916815260200191505b50975050505050505050604051602081830303815290604052906001600160e01b0319166020820180516001600160e01b03838183161783525050505090508b6001600160a01b0316631e6d0a848983888e6040518563ffffffff1660e01b815260040180856001600160a01b0316815260200180602001841515815260200180602001838103835286818151815260200191508051906020019080838360005b8381101561275757818101518382015260200161273f565b50505050905090810190601f1680156127845780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b838110156127b757818101518382015260200161279f565b50505050905090810190601f1680156127e45780820380516001836020036101000a031916815260200191505b509650505050505050600060405180830381600087803b15801561280757600080fd5b505af115801561281b573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052602081101561284457600080fd5b8101908080516040519392919084600160201b82111561286357600080fd5b90830190602082018581111561287857600080fd5b8251600160201b81118282018810171561289157600080fd5b82525081516020918201929091019080838360005b838110156128be5781810151838201526020016128a6565b50505050905090810190601f1680156128eb5780820380516001836020036101000a031916815260200191505b506040525050509350505050610d6c565b50969b9a5050505050505050505050565b6000336001600160a01b031663289b3c0d6040518163ffffffff1660e01b815260040160206040518083038186803b15801561294857600080fd5b505afa15801561295c573d6000803e3d6000fd5b505050506040513d602081101561297257600080fd5b5051905090565b6040518060800160405280600060ff16815260200160006001600160a01b0316815260200160008152602001600081525090565b6040518060800160405280600081526020016000600b0b81526020016000815260200160008152509056fe466c6f7741677265656d656e743a20666c6f7720646f6573206e6f742065786973744346413a206e6f7420656e6f75676820617661696c61626c652062616c616e6365466c6f7741677265656d656e743a2073656c6620666c6f77206e6f7420616c6c6f776564466c6f7741677265656d656e743a206e6567617469766520666c6f772072617465206e6f7420616c6c6f7765645369676e6564536166654d6174683a206d756c7469706c69636174696f6e206f766572666c6f775369676e6564536166654d6174683a207375627472616374696f6e206f766572666c6f77466c6f7741677265656d656e743a206163636f756e7420697320736f6c76656e74a264697066735822122051261a9ec510e670315447cb076e13addbfa0e91a825618746817ceb7834a98b64736f6c63430007010033",owner
    )
    const SFContract = new ethers.ContractFactory(
      abiSF, "0x608060405234801561001057600080fd5b506132f5806100206000396000f3fe608060405234801561001057600080fd5b50600436106101e55760003560e01c80636b4f33351161010f5780638f32d59b116100a2578063ba48b5f811610071578063ba48b5f81461040c578063bb84cfa11461041f578063f2fde38b14610432578063f9f522f414610445576101e5565b80638f32d59b146103d65780639470a5b2146103de578063ab033ea9146103e6578063ad3915c8146103f9576101e5565b80638129fc1c116100de5780638129fc1c146103a05780638bbe0f26146103a85780638d62bb01146103bb5780638da5cb5b146103ce576101e5565b80636b4f333514610351578063715018a61461036457806372d3297e1461036c57806374041e021461037f576101e5565b80633ca3ad4e1161018757806350d75d251161015657806350d75d251461030e57806352d1902d1461031657806357121e0c1461032b57806361d164d31461033e576101e5565b80633ca3ad4e146102a45780633f6c923a146102c4578063431f1481146102e857806346951954146102fb576101e5565b80631e855cf3116101c35780631e855cf31461024657806321b45bfd14610259578063289b3c0d1461026e578063393a2bfd14610283576101e5565b806313349046146101ea57806318a1d3de146102135780631e6d0a8414610233575b600080fd5b6101fd6101f8366004612211565b610466565b60405161020a9190612f90565b60405180910390f35b6102266102213660046124b2565b6104c1565b60405161020a9190612a0a565b610226610241366004612737565b6105db565b6102266102543660046126ea565b6107d9565b61026c610267366004612211565b6108e1565b005b610276610927565b60405161020a9190612915565b610296610291366004612588565b610936565b60405161020a929190612990565b6102b76102b2366004612211565b610992565b60405161020a91906129ab565b6102d76102d236600461242a565b6109af565b60405161020a9594939291906129cf565b6102766102f63660046125da565b610a28565b61026c610309366004612211565b610bdd565b610276610c0d565b61031e610c1c565b60405161020a91906129c6565b61026c610339366004612211565b610c40565b61022661034c3660046126ea565b610cbb565b6102b761035f366004612211565b610ea1565b61026c610ec2565b61022661037a366004612469565b610f30565b61039261038d366004612737565b611014565b60405161020a929190612a1d565b61026c6111f8565b61026c6103b636600461229c565b611245565b6103926103c936600461266b565b6115e5565b61027661180a565b6102b7611819565b61027661182a565b61026c6103f4366004612211565b611839565b61026c6104073660046127e3565b61187f565b61022661041a36600461266b565b6118ed565b6102b761042d3660046127ab565b611a71565b61026c610440366004612211565b611aa1565b610458610453366004612211565b611ace565b60405161020a9291906129b6565b6001600160a01b0381166000908152600360205260408120546001161561048f575060016104bc565b6001600160a01b038216600090815260036020526040902054600216156104b8575060026104bc565b5060005b919050565b60015460405163f9029be560e01b81526060916001600160a01b03169063f9029be5906104f2903390600401612915565b60206040518083038186803b15801561050a57600080fd5b505afa15801561051e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610542919061238d565b6105675760405162461bcd60e51b815260040161055e90612c82565b60405180910390fd5b61056f612110565b6105ae87878080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250611b0b92505050565b60ff86166020820152606081018590526080810184905290506105d081611b58565b979650505050505050565b60015460405163f9029be560e01b81526060916001600160a01b03169063f9029be59061060c903390600401612915565b60206040518083038186803b15801561062457600080fd5b505afa158015610638573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061065c919061238d565b6106785760405162461bcd60e51b815260040161055e90612c82565b6001600160a01b038716600090815260036020526040902054879080158015906106a457506180008116155b6106c05760405162461bcd60e51b815260040161055e90612b47565b6106c989610ea1565b156106e65760405162461bcd60e51b815260040161055e90612d06565b6000606061072a8b8b8b8080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201829052509250611bc9915050565b91509150811561078557808060200190518101906107489190612516565b945061075385611cda565b610780576000805160206132a08339815191528b6003604051610777929190612977565b60405180910390a15b6107cb565b876107a25760405162461bcd60e51b815260040161055e90612dfc565b6000805160206132a08339815191528b60066040516107c2929190612977565b60405180910390a15b505050509695505050505050565b600554606090156107fc5760405162461bcd60e51b815260040161055e90612e72565b6001600160a01b0383166000908152600360205260409020548390801580159061082857506180008116155b6108445760405162461bcd60e51b815260040161055e90612b47565b61084d85610ea1565b1561086a5760405162461bcd60e51b815260040161055e90612d06565b6040805160a0810182526000808252602082018190523392820192909252606081810183905260808201839052906108a190611b58565b90506108ae878783611d18565b95509150816108d1578460405162461bcd60e51b815260040161055e9190612a0a565b5050600060055550909392505050565b6108e9611819565b6109055760405162461bcd60e51b815260040161055e90612e3d565b600280546001600160a01b0319166001600160a01b0392909216919091179055565b6001546001600160a01b031690565b6000806000610946868686611e80565b905061097c816040518060200161095c9061213e565b6020820181038252601f19601f8201166040525080519060200120611eb6565b925061098783611eca565b915050935093915050565b6001600160a01b0316600090815260036020526040902054151590565b60008060008060006109bf612110565b6109fe88888080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250611b0b92505050565b8051602082015160408301516060840151608090940151929c919b50995091975095509350505050565b60006001600160a01b038716610a505760405162461bcd60e51b815260040161055e90612ace565b6000610a5d888585611e80565b90506000610a75826040518060200161095c9061213e565b9050610a8081611eca565b15610a9d5760405162461bcd60e51b815260040161055e90612b7e565b600082604051610aac9061213e565b8190604051809103906000f5905080158015610acc573d6000803e3d6000fd5b50600254604051634a0687ef60e01b81529192506001600160a01b0380841692634a0687ef92610b00921690600401612915565b600060405180830381600087803b158015610b1a57600080fd5b505af1158015610b2e573d6000803e3d6000fd5b50505050806001600160a01b0316826001600160a01b031614610b635760405162461bcd60e51b815260040161055e90612c05565b604051635b7cb91360e11b815281906001600160a01b0382169063b6f9722690610b9d908e908e908e908e908e908e903090600401612a42565b600060405180830381600087803b158015610bb757600080fd5b505af1158015610bcb573d6000803e3d6000fd5b50505050505050509695505050505050565b610be5611819565b610c015760405162461bcd60e51b815260040161055e90612e3d565b610c0a81611f06565b50565b6000610c17611fa5565b905090565b7fd18535e8b9050e123f35980bd696fe9efdf11a19677913233e8ad233310732a890565b610c4933610992565b610c655760405162461bcd60e51b815260040161055e90612b03565b610c6e81610992565b610c8a5760405162461bcd60e51b815260040161055e90612a99565b3360009081526004602090815260408083206001600160a01b0394909416835292905220805460ff19166001179055565b60055460609015610cde5760405162461bcd60e51b815260040161055e90612e72565b60015460405163f9029be560e01b815284916001600160a01b03169063f9029be590610d0e908490600401612915565b60206040518083038186803b158015610d2657600080fd5b505afa158015610d3a573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d5e919061238d565b610d7a5760405162461bcd60e51b815260040161055e90612c82565b60606000601885600081518110610d8d57fe5b602001015160f81c60f81b60f81c60ff1663ffffffff16901b601086600181518110610db557fe5b602001015160f81c60f81b60f81c60ff1663ffffffff16901b600887600281518110610ddd57fe5b0160200151885160f89190911c90911b9088906003908110610dfb57fe5b602001015160f81c60f81b60f81c60ff1617171760e01b9050610e5c6040518060a00160405280836001600160e01b0319168152602001600060ff168152602001336001600160a01b03168152602001600081526020016000815250611b58565b91506000610e6b878785611d18565b955090508015610e7f576000600555610e97565b60405162461bcd60e51b815260040161055e90612d6d565b5050505092915050565b6001600160a01b031660009081526003602052604090205461800016151590565b610eca611819565b610ee65760405162461bcd60e51b815260040161055e90612e3d565b600080546040516001600160a01b03909116907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a3600080546001600160a01b0319169055565b606083838080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250610f749250839150611cda9050565b610fbe5733600081815260036020819052604090912080546180001790556000805160206132a08339815191529190604051610fb1929190612977565b60405180910390a161100c565b60005b83811015610fd157600101610fc1565b5084848080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509294505050505b509392505050565b60015460405163f9029be560e01b815260609182916001600160a01b039091169063f9029be590611049903390600401612915565b60206040518083038186803b15801561106157600080fd5b505afa158015611075573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611099919061238d565b6110b55760405162461bcd60e51b815260040161055e90612c82565b6001600160a01b038816600090815260036020526040902054889080158015906110e157506180008116155b6110fd5760405162461bcd60e51b815260040161055e90612b47565b600060606111448c8c8c8080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525060019250611bc9915050565b9150915081156111a357808060200190518101906111629190612516565b955087878080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509297506111e992505050565b886111c05760405162461bcd60e51b815260040161055e90612cc4565b6000805160206132a08339815191528c60066040516111e0929190612977565b60405180910390a15b50505050965096945050505050565b600054600160a01b900460ff16156112225760405162461bcd60e51b815260040161055e90612dcf565b6000805460ff60a01b196001600160a01b0319909116331716600160a01b179055565b60018151116112665760405162461bcd60e51b815260040161055e90612ea9565b60005b81518110156115e157600082828151811061128057fe5b6020908102919091010151519050600081600581111561129c57fe5b1415611354576000808484815181106112b157fe5b6020026020010151604001518060200190518101906112d0919061226f565b915091508484815181106112e057fe5b6020026020010151602001516001600160a01b03166362aa52873384846040518463ffffffff1660e01b815260040161131b93929190612953565b600060405180830381600087803b15801561133557600080fd5b505af1158015611349573d6000803e3d6000fd5b5050505050506115d8565b600181600581111561136257fe5b141561142157600080600085858151811061137957fe5b602002602001015160400151806020019051810190611398919061222d565b9250925092508585815181106113aa57fe5b6020026020010151602001516001600160a01b03166316d055d6338585856040518563ffffffff1660e01b81526004016113e79493929190612929565b600060405180830381600087803b15801561140157600080fd5b505af1158015611415573d6000803e3d6000fd5b505050505050506115d8565b600281600581111561142f57fe5b14156114db5782828151811061144157fe5b6020026020010151602001516001600160a01b031663ca7894643385858151811061146857fe5b60200260200101516040015180602001905181019061148791906123a9565b6040518363ffffffff1660e01b81526004016114a4929190612977565b600060405180830381600087803b1580156114be57600080fd5b505af11580156114d2573d6000803e3d6000fd5b505050506115d8565b60038160058111156114e957fe5b1415611522578282815181106114fb57fe5b6020026020010151602001516001600160a01b031663245887fc3385858151811061146857fe5b600481600581111561153057fe5b14156115745761156e83838151811061154557fe5b60200260200101516020015184848151811061155d57fe5b602002602001015160400151610cbb565b506115d8565b600581600581111561158257fe5b14156115c05761156e83838151811061159757fe5b6020026020010151602001518484815181106115af57fe5b6020026020010151604001516107d9565b60405162461bcd60e51b815260040161055e90612d36565b50600101611269565b5050565b60015460405163f9029be560e01b8152606091829188916001600160a01b03169063f9029be59061161a908490600401612915565b60206040518083038186803b15801561163257600080fd5b505afa158015611646573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061166a919061238d565b6116865760405162461bcd60e51b815260040161055e90612c82565b84848080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152506116c89250839150611cda9050565b6117125733600081815260036020819052604090912080546180001790556000805160206132a08339815191529190604051611705929190612977565b60405180910390a16117fe565b61171a612110565b61175987878080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250611b0b92505050565b6040810180513390915290915061176f82611b58565b955060006117b58c8c8c8080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152508c9250611d18915050565b965090508015610e7f57858060200190518101906117d39190612516565b96506117de87611b0b565b6001600160a01b038316604082015292506117f883611b58565b96505050505b50509550959350505050565b6000546001600160a01b031690565b6000546001600160a01b0316331490565b6002546001600160a01b031690565b611841611819565b61185d5760405162461bcd60e51b815260040161055e90612e3d565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b6000811161189f5760405162461bcd60e51b815260040161055e90612f22565b33600090815260036020526040902054156118cc5760405162461bcd60e51b815260040161055e90612ee0565b60408051602080820183529281523360009081526003909352912090519055565b606082828080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152506119319250839150611cda9050565b61197b5733600081815260036020819052604090912080546180001790556000805160206132a0833981519152919060405161196e929190612977565b60405180910390a1611a67565b611983612110565b6119c285858080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250611b0b92505050565b60208101805160010160ff16908190529091506119e0903390611fca565b6119fc5760405162461bcd60e51b815260040161055e90612c4b565b611a0581611b58565b9250611a498888888080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250889250611d18915050565b50506020810180516000190160ff169052611a6381611b58565b9250505b5095945050505050565b6001600160a01b0380831660009081526004602090815260408083209385168352929052205460ff165b92915050565b611aa9611819565b611ac55760405162461bcd60e51b815260040161055e90612e3d565b610c0a8161202c565b600080611ad961214b565b5050506001600160a01b0316600090815260036020908152604091829020825191820190925290549081905280151591565b611b13612110565b81806020019051810190611b2791906123c1565b608086015260608501526001600160a01b0316604084015260ff1660208301526001600160e01b0319168152919050565b606081600001518260200151836040015184606001518560800151604051602001611b879594939291906129cf565b604051602081830303815290604052905080604051602001611ba9919061288a565b60408051601f198184030181529190528051602090910120600555919050565b6000606082611c3257846001600160a01b031684604051611bea919061288a565b6000604051808303816000865af19150503d8060008114611c27576040519150601f19603f3d011682016040523d82523d6000602084013e611c2c565b606091505b50611c8c565b846001600160a01b031684604051611c4a919061288a565b600060405180830381855afa9150503d8060008114611c85576040519150601f19603f3d011682016040523d82523d6000602084013e611c8a565b606091505b505b909250905081611cd2576113885a1015611cb85760405162461bcd60e51b815260040161055e90612da4565b8060405162461bcd60e51b815260040161055e9190612a0a565b935093915050565b6000808251118015611a9b575060055482604051602001611cfb919061288a565b604051602081830303815290604052805190602001201492915050565b6000606060006020845181611d2957fe5b04600101602002905060088451901c60f81b85600287510381518110611d4b57fe5b60200101906001600160f81b031916908160001a905350835160f81b85600187510381518110611d7757fe5b60200101906001600160f81b031916908160001a9053508484855183036001600160401b0381118015611da957600080fd5b506040519080825280601f01601f191660200182016040528015611dd4576020820181803683370190505b50604051602001611de7939291906128a6565b6040516020818303038152906040529350856001600160a01b031684604051611e10919061288a565b6000604051808303816000865af19150503d8060008114611e4d576040519150601f19603f3d011682016040523d82523d6000602084013e611e52565b606091505b50909350915082611e77578160405162461bcd60e51b815260040161055e9190612a0a565b50935093915050565b6000838383604051602001611e97939291906128e9565b6040516020818303038152906040528051906020012090509392505050565b6000611ec38383306120ad565b9392505050565b6000813f7fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470818114801590611efe57508115155b949350505050565b806001600160a01b03166352d1902d6040518163ffffffff1660e01b815260040160206040518083038186803b158015611f3f57600080fd5b505afa158015611f53573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f7791906123a9565b611f7f610c1c565b14611f9c5760405162461bcd60e51b815260040161055e90612f59565b610c0a816120ec565b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc5490565b600080611fd684610466565b90508060ff166001148015611fee575060018360ff16115b15611ffd576000915050611a9b565b8060ff166002148015612013575060028360ff16115b15612022576000915050611a9b565b5060019392505050565b6001600160a01b0381166120525760405162461bcd60e51b815260040161055e90612bbf565b600080546040516001600160a01b03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a3600080546001600160a01b0319166001600160a01b0392909216919091179055565b60008060ff60f81b8386866040516020016120cb9493929190612851565b60408051808303601f19018152919052805160209091012095945050505050565b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc55565b6040805160a08101825260008082526020820181905291810182905260608101829052608081019190915290565b6102568061304a83390190565b6040518060200160405280600081525090565b8035611a9b81613017565b60008083601f84011261217a578182fd5b5081356001600160401b03811115612190578182fd5b6020830191508360208285010111156121a857600080fd5b9250929050565b600082601f8301126121bf578081fd5b81356121d26121cd82612fc4565b612f9e565b91508082528360208285010111156121e957600080fd5b8060208401602084013760009082016020015292915050565b803560068110611a9b57600080fd5b600060208284031215612222578081fd5b8135611ec381613017565b600080600060608486031215612241578182fd5b835161224c81613017565b602085015190935061225d81613017565b80925050604084015190509250925092565b60008060408385031215612281578182fd5b825161228c81613017565b6020939093015192949293505050565b600060208083850312156122ae578182fd5b82356001600160401b03808211156122c4578384fd5b818501915085601f8301126122d7578384fd5b8135818111156122e5578485fd5b6122f28485830201612f9e565b81815284810190848601875b8481101561237e5781358701606080601f19838f0301121561231e578a8bfd5b61232781612f9e565b6123338e8c8501612202565b815260406123438f82860161215e565b828d0152918301359189831115612358578c8dfd5b6123668f8d858701016121af565b908201528652505092870192908701906001016122fe565b50909998505050505050505050565b60006020828403121561239e578081fd5b8151611ec38161302c565b6000602082840312156123ba578081fd5b5051919050565b600080600080600060a086880312156123d8578283fd5b85516001600160e01b0319811681146123ef578384fd5b60208701519095506124008161303a565b604087015190945061241181613017565b6060870151608090970151959894975095949392505050565b6000806020838503121561243c578182fd5b82356001600160401b03811115612451578283fd5b61245d85828601612169565b90969095509350505050565b60008060006040848603121561247d578081fd5b83356001600160401b03811115612492578182fd5b61249e86828701612169565b909790965060209590950135949350505050565b6000806000806000608086880312156124c9578283fd5b85356001600160401b038111156124de578384fd5b6124ea88828901612169565b90965094505060208601356124fe8161303a565b94979396509394604081013594506060013592915050565b600060208284031215612527578081fd5b81516001600160401b0381111561253c578182fd5b8201601f8101841361254c578182fd5b805161255a6121cd82612fc4565b81815285602083850101111561256e578384fd5b61257f826020830160208601612fe7565b95945050505050565b60008060006040848603121561259c578081fd5b83356125a781613017565b925060208401356001600160401b038111156125c1578182fd5b6125cd86828701612169565b9497909650939450505050565b600080600080600080608087890312156125f2578384fd5b86356125fd81613017565b9550602087013561260d8161303a565b945060408701356001600160401b0380821115612628578586fd5b6126348a838b01612169565b9096509450606089013591508082111561264c578283fd5b5061265989828a01612169565b979a9699509497509295939492505050565b600080600080600060608688031215612682578283fd5b853561268d81613017565b945060208601356001600160401b03808211156126a8578485fd5b6126b489838a01612169565b909650945060408801359150808211156126cc578283fd5b506126d988828901612169565b969995985093965092949392505050565b600080604083850312156126fc578182fd5b823561270781613017565b915060208301356001600160401b03811115612721578182fd5b61272d858286016121af565b9150509250929050565b6000806000806000806080878903121561274f578384fd5b863561275a81613017565b955060208701356001600160401b0380821115612775578586fd5b6127818a838b01612169565b9097509550604089013591506127968261302c565b9093506060880135908082111561264c578384fd5b600080604083850312156127bd578182fd5b82356127c881613017565b915060208301356127d881613017565b809150509250929050565b6000602082840312156127f4578081fd5b5035919050565b60008151808452612813816020860160208601612fe7565b601f01601f19169290920160200192915050565b60008284528282602086013780602084860101526020601f19601f85011685010190509392505050565b6001600160f81b031994909416845260609290921b6bffffffffffffffffffffffff191660018401526015830152603582015260550190565b6000825161289c818460208701612fe7565b9190910192915050565b600084516128b8818460208901612fe7565b8451908301906128cc818360208901612fe7565b84519101906128df818360208801612fe7565b0195945050505050565b60006bffffffffffffffffffffffff198560601b16825282846014840137910160140190815292915050565b6001600160a01b0391909116815260200190565b6001600160a01b039485168152928416602084015292166040820152606081019190915260800190565b6001600160a01b039384168152919092166020820152604081019190915260600190565b6001600160a01b03929092168252602082015260400190565b6001600160a01b039290921682521515602082015260400190565b901515815260200190565b9115158252602082015260400190565b90815260200190565b6001600160e01b031995909516855260ff9390931660208501526001600160a01b039190911660408401526060830152608082015260a00190565b600060208252611ec360208301846127fb565b600060408252612a3060408301856127fb565b828103602084015261257f81856127fb565b600060018060a01b03808a16835260ff8916602084015260a06040840152612a6e60a08401888a612827565b8381036060850152612a81818789612827565b92505080841660808401525098975050505050505050565b6020808252818101527f5375706572666c7569643a20746172676574206973206e6f7420616e20617070604082015260600190565b6020808252818101527f5375706572666c75696452656769737472793a205a45524f5f41444452455353604082015260600190565b60208082526024908201527f5375706572666c7569643a206d73672e73656e646572206973206e6f7420616e6040820152630206170760e41b606082015260800190565b6020808252601d908201527f5375706572666c7569643a206e6f7420616e2061637469766520617070000000604082015260600190565b60208082526021908201527f5375706572666c75696452656769737472793a20575241505045525f455849536040820152601560fa1b606082015260800190565b60208082526026908201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160408201526564647265737360d01b606082015260800190565b60208082526026908201527f5375706572666c7569643a20554e45585045435445445f575241505045525f4160408201526544445245535360d01b606082015260800190565b6020808252601b908201527f53463a204170702043616c6c20537461636b20746f6f20646565700000000000604082015260600190565b60208082526022908201527f53463a204f6e6c79206c6973746564206167726565656d656e7420616c6c6f77604082015261195960f21b606082015260800190565b60208082526022908201527f5375706572666c7569643a206265666f72652063616c6c6261636b206661696c604082015261195960f21b606082015260800190565b60208082526016908201527514d18e88105c1c08185b1c9958591e481a985a5b195960521b604082015260600190565b6020808252601a908201527f53463a20556e6b6e6f776e206f7065726174696f6e2074797065000000000000604082015260600190565b60208082526019908201527f53463a2063616c6c2061677265656d656e74206661696c656400000000000000604082015260600190565b60208082526011908201527053463a2053656e64206d6f72652067617360781b604082015260600190565b602080825260139082015272185b1c9958591e481a5b9a5d1a585b1a5e9959606a1b604082015260600190565b60208082526021908201527f5375706572666c7569643a2061667465722063616c6c6261636b206661696c656040820152601960fa1b606082015260800190565b6020808252818101527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604082015260600190565b6020808252601c908201527f5375706572666c7569643a20437478206973206e6f7420636c65616e00000000604082015260600190565b60208082526019908201527f53463a20557365207468652073696e676c65206d6574686f6400000000000000604082015260600190565b60208082526022908201527f5375706572666c7569643a2061707020616c7265616479207265676973746572604082015261195960f21b606082015260800190565b6020808252601f908201527f5375706572666c7569643a20696e76616c696420636f6e66696720776f726400604082015260600190565b60208082526019908201527f50726f786961626c653a204e4f545f434f4d50415449424c4500000000000000604082015260600190565b60ff91909116815260200190565b6040518181016001600160401b0381118282101715612fbc57600080fd5b604052919050565b60006001600160401b03821115612fd9578081fd5b50601f01601f191660200190565b60005b83811015613002578181015183820152602001612fea565b83811115613011576000848401525b50505050565b6001600160a01b0381168114610c0a57600080fd5b8015158114610c0a57600080fd5b60ff81168114610c0a57600080fdfe608060405234801561001057600080fd5b50610236806100206000396000f3fe6080604052600436106100225760003560e01c80634a0687ef1461008657610076565b36610076576040805162461bcd60e51b815260206004820152601860248201527f50726f78793a20524543454956455f464f5242494444454e0000000000000000604482015290519081900360640190fd5b005b6100746100816100b9565b6100de565b34801561009257600080fd5b50610074600480360360208110156100a957600080fd5b50356001600160a01b0316610102565b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc5490565b3660008037600080366000845af43d6000803e8080156100fd573d6000f35b3d6000fd5b6001600160a01b0381166101475760405162461bcd60e51b81526004018080602001828103825260248152602001806101dd6024913960400191505060405180910390fd5b60006101516100b9565b6001600160a01b0316146101ac576040805162461bcd60e51b815260206004820152601a60248201527f50726f78793a20414c52454144595f494e495449414c495a4544000000000000604482015290519081900360640190fd5b6101b5816101b8565b50565b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc5556fe50726f78793a20494e495449414c495a45445f574954485f5a45524f5f41444452455353a26469706673582212202e6d810b41384f7a7e8d90556356920fc289d3180a840445d85ebb4bec39b84864736f6c63430007010033be3aa33bd245135e4e26b223d79d14ea479a47bff09f2b03c53838af1edbb14ba2646970667358221220fa3ebd3c0a85350f0cf843a440f121c61f2f89ee48a7a1454694347b380e4d0964736f6c63430007010033"
      ,owner
      );

    const SFTContract = new ethers.ContractFactory(
      abiSFT,"0x608060405234801561001057600080fd5b50614320806100206000396000f3fe608060405234801561001057600080fd5b50600436106102a05760003560e01c80636c2d9f2f11610167578063a9059cbb116100ce578063eb3537cc11610087578063eb3537cc14610be6578063f2fde38b14610c12578063f3c70aad14610c38578063fad8b32a14610c40578063fc673c4f14610c66578063fe9d930314610d39576102a0565b8063a9059cbb14610a27578063b6f9722614610a53578063ca78946414610b32578063cf97256d14610b5e578063d95b637114610b8a578063dd62ed3e14610bb8576102a0565b80638fb4c995116101205780638fb4c995146108b5578063959b8c3f146108db57806395d89b41146109015780639bd9bbc614610909578063a1b2bf8b1461098c578063a3a7e7f314610a01576102a0565b80636c2d9f2f1461080b57806370a082311461083d578063715018a6146108635780638960bb191461086b5780638da5cb5b146108a55780638f32d59b146108ad576102a0565b80632ec8eec71161020b5780634b61cc33116101c45780634b61cc33146106a357806350d75d25146106df57806352d1902d146106e7578063556f0dc7146106ef57806362aa5287146106f757806362ad1b831461072d576102a0565b80632ec8eec7146105d0578063313ce56714610614578063386fa221146106325780633f3dc4911461065857806345977d0314610660578063469519541461067d576102a0565b806316d055d61161025d57806316d055d6146104d157806318160ddd1461050d57806320bc44251461052757806323b872dd1461054b578063245887fc1461058157806327048397146105ad576102a0565b806306e48538146102a557806306fdde03146102fd578063090c415e1461037a578063095ea7b3146103ff57806311bcc81e1461043f57806312a6a3f81461045c575b600080fd5b6102ad610d70565b60408051602080825283518183015283519192839290830191858101910280838360005b838110156102e95781810151838201526020016102d1565b505050509050019250505060405180910390f35b610305610d75565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561033f578181015183820152602001610327565b50505050905090810190601f16801561036c5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b6103fd6004803603606081101561039057600080fd5b6001600160a01b0382351691602081013591810190606081016040820135600160201b8111156103bf57600080fd5b8201836020820111156103d157600080fd5b803590602001918460208302840111600160201b831117156103f257600080fd5b509092509050610e08565b005b61042b6004803603604081101561041557600080fd5b506001600160a01b03813516906020013561101a565b604080519115158252519081900360200190f35b6103fd6004803603602081101561045557600080fd5b5035611030565b6103fd6004803603604081101561047257600080fd5b81359190810190604081016020820135600160201b81111561049357600080fd5b8201836020820111156104a557600080fd5b803590602001918460208302840111600160201b831117156104c657600080fd5b50909250905061103d565b6103fd600480360360808110156104e757600080fd5b506001600160a01b0381358116916020810135821691604082013516906060013561127a565b6105156112da565b60408051918252519081900360200190f35b61052f611356565b604080516001600160a01b039092168252519081900360200190f35b61042b6004803603606081101561056157600080fd5b506001600160a01b03813581169160208101359091169060400135611365565b6103fd6004803603604081101561059757600080fd5b506001600160a01b03813516906020013561137b565b6103fd600480360360408110156105c357600080fd5b50803590602001356113d6565b6105f6600480360360208110156105e657600080fd5b50356001600160a01b03166115a0565b60408051938452602084019290925282820152519081900360600190f35b61061c6115bc565b6040805160ff9092168252519081900360200190f35b6102ad6004803603602081101561064857600080fd5b50356001600160a01b03166115c1565b61052f61175a565b6103fd6004803603602081101561067657600080fd5b5035611769565b6103fd6004803603602081101561069357600080fd5b50356001600160a01b0316611773565b6102ad600480360360808110156106b957600080fd5b506001600160a01b038135811691602081013590911690604081013590606001356117d5565b61052f611853565b610515611862565b610515611886565b6103fd6004803603606081101561070d57600080fd5b506001600160a01b0381358116916020810135909116906040013561188b565b6103fd600480360360a081101561074357600080fd5b6001600160a01b03823581169260208101359091169160408201359190810190608081016060820135600160201b81111561077d57600080fd5b82018360208201111561078f57600080fd5b803590602001918460018302840111600160201b831117156107b057600080fd5b919390929091602081019035600160201b8111156107cd57600080fd5b8201836020820111156107df57600080fd5b803590602001918460018302840111600160201b8311171561080057600080fd5b5090925090506118e8565b6102ad6004803603606081101561082157600080fd5b506001600160a01b038135169060208101359060400135611a1a565b6105156004803603602081101561085357600080fd5b50356001600160a01b0316611a89565b6103fd611ab2565b6103fd6004803603608081101561088157600080fd5b506001600160a01b0381358116916020810135916040820135169060600135611b55565b61052f611f62565b61042b611f71565b61042b600480360360208110156108cb57600080fd5b50356001600160a01b0316611f82565b6103fd600480360360208110156108f157600080fd5b50356001600160a01b0316611f9b565b610305612044565b6103fd6004803603606081101561091f57600080fd5b6001600160a01b0382351691602081013591810190606081016040820135600160201b81111561094e57600080fd5b82018360208201111561096057600080fd5b803590602001918460018302840111600160201b8311171561098157600080fd5b5090925090506120a5565b6103fd600480360360408110156109a257600080fd5b81359190810190604081016020820135600160201b8111156109c357600080fd5b8201836020820111156109d557600080fd5b803590602001918460208302840111600160201b831117156109f657600080fd5b5090925090506120ff565b6103fd60048036036020811015610a1757600080fd5b50356001600160a01b031661233c565b61042b60048036036040811015610a3d57600080fd5b506001600160a01b038135169060200135612350565b6103fd600480360360a0811015610a6957600080fd5b6001600160a01b038235169160ff60208201351691810190606081016040820135600160201b811115610a9b57600080fd5b820183602082011115610aad57600080fd5b803590602001918460018302840111600160201b83111715610ace57600080fd5b919390929091602081019035600160201b811115610aeb57600080fd5b820183602082011115610afd57600080fd5b803590602001918460018302840111600160201b83111715610b1e57600080fd5b9193509150356001600160a01b031661235e565b6103fd60048036036040811015610b4857600080fd5b506001600160a01b03813516906020013561243d565b6103fd60048036036040811015610b7457600080fd5b506001600160a01b038135169060200135612494565b61042b60048036036040811015610ba057600080fd5b506001600160a01b0381358116916020013516612605565b61051560048036036040811015610bce57600080fd5b506001600160a01b0381358116916020013516612652565b6105f660048036036040811015610bfc57600080fd5b506001600160a01b03813516906020013561267d565b6103fd60048036036020811015610c2857600080fd5b50356001600160a01b031661269a565b61061c6126fc565b6103fd60048036036020811015610c5657600080fd5b50356001600160a01b0316612701565b6103fd60048036036080811015610c7c57600080fd5b6001600160a01b0382351691602081013591810190606081016040820135600160201b811115610cab57600080fd5b820183602082011115610cbd57600080fd5b803590602001918460018302840111600160201b83111715610cde57600080fd5b919390929091602081019035600160201b811115610cfb57600080fd5b820183602082011115610d0d57600080fd5b803590602001918460018302840111600160201b83111715610d2e57600080fd5b509092509050612757565b6103fd60048036036040811015610d4f57600080fd5b81359190810190604081016020820135600160201b811115610cfb57600080fd5b606090565b60028054604080516020601f6000196101006001871615020190941685900493840181900481028201810190925282815260609390929091830182828015610dfe5780601f10610dd357610100808354040283529160200191610dfe565b820191906000526020600020905b815481529060010190602001808311610de157829003601f168201915b5050505050905090565b6000600460009054906101000a90046001600160a01b03166001600160a01b031663289b3c0d6040518163ffffffff1660e01b815260040160206040518083038186803b158015610e5857600080fd5b505afa158015610e6c573d6000803e3d6000fd5b505050506040513d6020811015610e8257600080fd5b50516040805163f9029be560e01b815233600482015290519192506001600160a01b0383169163f9029be591602480820192602092909190829003018186803b158015610ece57600080fd5b505afa158015610ee2573d6000803e3d6000fd5b505050506040513d6020811015610ef857600080fd5b5051610f355760405162461bcd60e51b81526004018080602001828103825260228152602001806140fa6022913960400191505060405180910390fd5b6040805133818301526001600160a01b03871660608201526080808201879052602080830191909152600e60a08301526d41677265656d656e74537461746560901b60c0808401919091528351808403909101815260e08301808552815191830191909120610100928702808501840190955286825293610fd293859389928992839201908490808284376000920191909152506127cf92505050565b6040805186815290516001600160a01b0388169133917f30f416fa68fca014a0f334464c64b000ba53e99b6d2afdea9d5ca756372d59859181900360200190a3505050505050565b6000611027338484612801565b50600192915050565b61103a33826128ed565b50565b6000600460009054906101000a90046001600160a01b03166001600160a01b031663289b3c0d6040518163ffffffff1660e01b815260040160206040518083038186803b15801561108d57600080fd5b505afa1580156110a1573d6000803e3d6000fd5b505050506040513d60208110156110b757600080fd5b50516040805163f9029be560e01b815233600482015290519192506001600160a01b0383169163f9029be591602480820192602092909190829003018186803b15801561110357600080fd5b505afa158015611117573d6000803e3d6000fd5b505050506040513d602081101561112d57600080fd5b505161116a5760405162461bcd60e51b81526004018080602001828103825260228152602001806140fa6022913960400191505060405180910390fd5b60408051338183018190526060808301889052602080840191909152600d60808401526c41677265656d656e744461746160981b60a0808501919091528451808503909101815260c0840180865281519183019190912060e09288028086018401909652878252929492936111fd9385938a928a928392909101908490808284376000920191909152506127cf92505050565b816001600160a01b03167f770ea40a13a4644573ed785e5c7116890709947918747febc5add46feb531e2d87878760405180848152602001806020018281038252848482818152602001925060200280828437600083820152604051601f909101601f1916909201829003965090945050505050a2505050505050565b6004546001600160a01b031633146112c7576040805162461bcd60e51b815260206004820152601e6024820152600080516020614185833981519152604482015290519081900360640190fd5b6112d384848484612a38565b5050505050565b600154604080516370a0823160e01b815230600482015290516000926001600160a01b0316916370a08231916024808301926020929190829003018186803b15801561132557600080fd5b505afa158015611339573d6000803e3d6000fd5b505050506040513d602081101561134f57600080fd5b5051905090565b6004546001600160a01b031690565b600061137333858585612a38565b949350505050565b6004546001600160a01b031633146113c8576040805162461bcd60e51b815260206004820152601e6024820152600080516020614185833981519152604482015290519081900360640190fd5b6113d282826128ed565b5050565b6000600460009054906101000a90046001600160a01b03166001600160a01b031663289b3c0d6040518163ffffffff1660e01b815260040160206040518083038186803b15801561142657600080fd5b505afa15801561143a573d6000803e3d6000fd5b505050506040513d602081101561145057600080fd5b50516040805163f9029be560e01b815233600482015290519192506001600160a01b0383169163f9029be591602480820192602092909190829003018186803b15801561149c57600080fd5b505afa1580156114b0573d6000803e3d6000fd5b505050506040513d60208110156114c657600080fd5b50516115035760405162461bcd60e51b81526004018080602001828103825260228152602001806140fa6022913960400191505060405180910390fd5b60408051338183018190526060808301879052602080840191909152600d60808401526c41677265656d656e744461746160981b60a0808501919091528451808503909101815260c0909301909352815191909201206115638185612c62565b60408051868152905133917f71a63dc095de07aa5512ad57a7596a39516317e316981a1cd71000057be1537b919081900360200190a25050505050565b60008060006115af844261267d565b9250925092509193909250565b601290565b600480546040805163289b3c0d60e01b815290516060936000936001600160a01b03169263289b3c0d9281830192602092829003018186803b15801561160657600080fd5b505afa15801561161a573d6000803e3d6000fd5b505050506040513d602081101561163057600080fd5b50516001600160a01b0384811660009081526007602052604080822054815163bebb6f2f60e01b81529019600482015290519394509184169263bebb6f2f926024808201939291829003018186803b15801561168b57600080fd5b505afa15801561169f573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f1916820160405260208110156116c857600080fd5b8101908080516040519392919084600160201b8211156116e757600080fd5b9083019060208201858111156116fc57600080fd5b82518660208202830111600160201b8211171561171857600080fd5b82525081516020918201928201910280838360005b8381101561174557818101518382015260200161172d565b50505050905001604052505050915050919050565b6001546001600160a01b031690565b61103a3382612c7b565b61177b611f71565b6117cc576040805162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015290519081900360640190fd5b61103a81612d80565b604080516001600160a01b038087168284015285166060828101919091526080808301869052602080840191909152600e60a08401526d41677265656d656e74537461746560901b60c0808501919091528451808503909101815260e0909301909352815191909201206118498184612e48565b9695505050505050565b600061185d612ec9565b905090565b7f6bfbb132610e56cb96575dba244667b9d6dbfeffe22b68a79fa16f2d18eb001990565b600190565b6004546001600160a01b031633146118d8576040805162461bcd60e51b815260206004820152601e6024820152600080516020614185833981519152604482015290519081900360640190fd5b6118e3838383612801565b505050565b336118f38189612605565b6040518060600160405280603081526020016141a560309139906119955760405162461bcd60e51b81526004018080602001828103825283818151815260200191508051906020019080838360005b8381101561195a578181015183820152602001611942565b50505050905090810190601f1680156119875780820380516001836020036101000a031916815260200191505b509250505060405180910390fd5b50611a108189898989898080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201919091525050604080516020601f8d018190048102820181019092528b815292508b91508a908190840183828082843760009201919091525060019250612eee915050565b5050505050505050565b604080516001600160a01b0385168183015260608181018590526020808301829052600d60808401526c41677265656d656e744461746160981b60a0808501919091528451808503909101815260c090930190935281519190920120611a808184612e48565b95945050505050565b600080611a96834261301c565b5050905060008112611aa85780611aab565b60005b9392505050565b611aba611f71565b611b0b576040805162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015290519081900360640190fd5b600080546040516001600160a01b03909116907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a3600080546001600160a01b0319169055565b6000600460009054906101000a90046001600160a01b03166001600160a01b031663289b3c0d6040518163ffffffff1660e01b815260040160206040518083038186803b158015611ba557600080fd5b505afa158015611bb9573d6000803e3d6000fd5b505050506040513d6020811015611bcf57600080fd5b50516040805163f9029be560e01b815233600482015290519192506001600160a01b0383169163f9029be591602480820192602092909190829003018186803b158015611c1b57600080fd5b505afa158015611c2f573d6000803e3d6000fd5b505050506040513d6020811015611c4557600080fd5b5051611c825760405162461bcd60e51b81526004018080602001828103825260228152602001806140fa6022913960400191505060405180910390fd5b6000600460009054906101000a90046001600160a01b03166001600160a01b031663289b3c0d6040518163ffffffff1660e01b815260040160206040518083038186803b158015611cd257600080fd5b505afa158015611ce6573d6000803e3d6000fd5b505050506040513d6020811015611cfc57600080fd5b5051604080516301c64fdd60e31b815230600482015290519192506000916001600160a01b03841691630e327ee8916024808301926020929190829003018186803b158015611d4a57600080fd5b505afa158015611d5e573d6000803e3d6000fd5b505050506040513d6020811015611d7457600080fd5b505190506001600160a01b038116611d895750855b6000611d95864261267d565b5090915060009050611da7828761316c565b90506000811315611e68576001600160a01b038316600090815260056020526040902054611dd5908761316c565b6001600160a01b038085166000908152600560205260408082209390935590891681522054611e0490876131d1565b6001600160a01b038089166000818152600560209081526040918290209490945580518c81529384018a9052805192871693919233927f8505c3d8f1f184f032cf0bc4cd80ee61c8b9d94f8907c3281bf0101a2610fe8092908290030190a4611f57565b6001600160a01b038916600090815260056020526040902054611e8b908761316c565b6001600160a01b03808b166000908152600560205260408082209390935590891681522054611ec6908790611ec090856131d1565b906131d1565b6001600160a01b038089166000908152600560205260408082209390935590851681522054611ef5908361316c565b6001600160a01b038085166000908152600560209081526040918290209390935580518b815292830189905280518c831693928b169233927f8505c3d8f1f184f032cf0bc4cd80ee61c8b9d94f8907c3281bf0101a2610fe8092918290030190a45b505050505050505050565b6000546001600160a01b031690565b6000546001600160a01b0316331490565b600080611f8f834261267d565b50506000139392505050565b336001600160a01b038216811415611fe45760405162461bcd60e51b81526004018080602001828103825260288152602001806140d26028913960400191505060405180910390fd5b6001600160a01b03808216600081815260086020908152604080832094871680845294909152808220805460ff19166001179055519192917ff4caeb2d6ca8932a215a353d0703c326ec2d81fc68170f320eb2ab49e9df61f99190a35050565b60038054604080516020601f6002600019610100600188161502019095169490940493840181900481028201810190925282815260609390929091830182828015610dfe5780601f10610dd357610100808354040283529160200191610dfe565b6120f93333868686868080601f01602080910402602001604051908101604052809392919081815260200183838082843760009201829052506040805160208101909152908152925060019150612eee9050565b50505050565b6000600460009054906101000a90046001600160a01b03166001600160a01b031663289b3c0d6040518163ffffffff1660e01b815260040160206040518083038186803b15801561214f57600080fd5b505afa158015612163573d6000803e3d6000fd5b505050506040513d602081101561217957600080fd5b50516040805163f9029be560e01b815233600482015290519192506001600160a01b0383169163f9029be591602480820192602092909190829003018186803b1580156121c557600080fd5b505afa1580156121d9573d6000803e3d6000fd5b505050506040513d60208110156121ef57600080fd5b505161222c5760405162461bcd60e51b81526004018080602001828103825260228152602001806140fa6022913960400191505060405180910390fd5b60408051338183018190526060808301889052602080840191909152600d60808401526c41677265656d656e744461746160981b60a0808501919091528451808503909101815260c0840180865281519183019190912060e09288028086018401909652878252929492936122bf9385938a928a928392909101908490808284376000920191909152506127cf92505050565b336001600160a01b03167f0c4c547b3a4fcaa5be8353b3111472b124155bccc86de811d4a481c9e6e9faca87878760405180848152602001806020018281038252848482818152602001925060200280828437600083820152604051601f909101601f1916909201829003965090945050505050a2505050505050565b6113d233338361234b33611a89565b612a38565b6000611aab33338585612a38565b600054600160a01b900460ff16156123b3576040805162461bcd60e51b8152602060048201526013602482015272185b1c9958591e481a5b9a5d1a585b1a5e9959606a1b604482015290519081900360640190fd5b600080546001600160a01b031960ff60a01b19918216600160a01b908117821633179093556001805460ff8b169094026001600160a01b038c16949092169390931790911617905561240760028686613fcb565b5061241460038484613fcb565b50600480546001600160a01b0319166001600160a01b0392909216919091179055505050505050565b6004546001600160a01b0316331461248a576040805162461bcd60e51b815260206004820152601e6024820152600080516020614185833981519152604482015290519081900360640190fd5b6113d28282612c7b565b6000600460009054906101000a90046001600160a01b03166001600160a01b031663289b3c0d6040518163ffffffff1660e01b815260040160206040518083038186803b1580156124e457600080fd5b505afa1580156124f8573d6000803e3d6000fd5b505050506040513d602081101561250e57600080fd5b50516040805163f9029be560e01b815233600482015290519192506001600160a01b0383169163f9029be591602480820192602092909190829003018186803b15801561255a57600080fd5b505afa15801561256e573d6000803e3d6000fd5b505050506040513d602081101561258457600080fd5b50516125c15760405162461bcd60e51b81526004018080602001828103825260228152602001806140fa6022913960400191505060405180910390fd5b6001600160a01b0383166000908152600560205260409020546125e4908361316c565b6001600160a01b039093166000908152600560205260409020929092555050565b6000816001600160a01b0316836001600160a01b03161480611aab5750506001600160a01b0390811660009081526008602090815260408083209490931682529290925290205460ff1690565b6001600160a01b03918216600090815260066020908152604080832093909416825291909152205490565b600080600061268c858561301c565b919790965090945092505050565b6126a2611f71565b6126f3576040805162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015290519081900360640190fd5b61103a81613236565b601281565b3360008181526008602090815260408083206001600160a01b0386168085529252808320805460ff191690555183927f50546e66e5f44d728365dc3908c63bc5cfeeab470722c1677e3073a6ac294aa191a35050565b604080518082018252601981527f5375706572546f6b656e3a206e6f7420737570706f72746564000000000000006020808301918252925162461bcd60e51b8152600481019384528251602482015282519293928392604490920191908083836000831561195a578181015183820152602001611942565b60005b81518110156118e35760008282815181106127e957fe5b602090810291909101015184830155506001016127d2565b6001600160a01b0383166128465760405162461bcd60e51b815260040180806020018281038252602581526020018061413d6025913960400191505060405180910390fd5b6001600160a01b03821661288b5760405162461bcd60e51b81526004018080602001828103825260238152602001806141626023913960400191505060405180910390fd5b6001600160a01b03808416600081815260066020908152604080832094871680845294825291829020859055815185815291517f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b9259281900390910190a3505050565b806128f783611a89565b10156129345760405162461bcd60e51b815260040180806020018281038252602c81526020018061429d602c913960400191505060405180910390fd5b600061293f826132d6565b80935081925050506129723384846040518060200160405280600081525060405180602001604052806000815250613368565b6001546040805163a9059cbb60e01b81526001600160a01b038681166004830152602482018590529151919092169163a9059cbb9160448083019260209291908290030181600087803b1580156129c857600080fd5b505af11580156129dc573d6000803e3d6000fd5b505050506040513d60208110156129f257600080fd5b50506040805183815290516001600160a01b038516917f3bc27981aebbb57f9247dc00fde9d6cd91e4b230083fec3238fedbcba1f9ab3d919081900360200190a2505050565b6000806001600160a01b0316846001600160a01b031614156040518060600160405280602681526020016140ac6026913990612ab55760405162461bcd60e51b815260206004820181815283516024840152835190928392604490910191908501908083836000831561195a578181015183820152602001611942565b5060006001600160a01b0316836001600160a01b031614156040518060600160405280602481526020016141d56024913990612b325760405162461bcd60e51b815260206004820181815283516024840152835190928392604490910191908501908083836000831561195a578181015183820152602001611942565b506000339050612b648186868660405180602001604052806000815250604051806020016040528060008152506135b3565b612b908186868660405180602001604052806000815250604051806020016040528060008152506137df565b846001600160a01b0316866001600160a01b031614612c2857612c288587612c23866040518060600160405280602d8152602001614224602d9139600660008c6001600160a01b03166001600160a01b0316815260200190815260200160002060008d6001600160a01b03166001600160a01b0316815260200190815260200160002054613a1a9092919063ffffffff16565b612801565b612c568186868660405180602001604052806000815250604051806020016040528060008152506000613a74565b50600195945050505050565b60005b818110156118e357600083820155600101612c65565b6000612c86826132d6565b600154604080516323b872dd60e01b81526001600160a01b03888116600483015230602483015260448201869052915193965093945016916323b872dd9160648083019260209291908290030181600087803b158015612ce557600080fd5b505af1158015612cf9573d6000803e3d6000fd5b505050506040513d6020811015612d0f57600080fd5b5050604080516020818101835260008083528351918201909352918252612d3c9133918691869190613cef565b6040805183815290516001600160a01b038516917f25ca84076773b0455db53621c459ddc84fe40840e4932a62706a032566f399df919081900360200190a2505050565b806001600160a01b03166352d1902d6040518163ffffffff1660e01b815260040160206040518083038186803b158015612db957600080fd5b505afa158015612dcd573d6000803e3d6000fd5b505050506040513d6020811015612de357600080fd5b5051612ded611862565b14612e3f576040805162461bcd60e51b815260206004820152601960248201527f50726f786961626c653a204e4f545f434f4d50415449424c4500000000000000604482015290519081900360640190fd5b61103a81613efe565b60608167ffffffffffffffff81118015612e6157600080fd5b50604051908082528060200260200182016040528015612e8b578160200160208202803683370190505b50905060005b82811015612ec257600081850154905080838381518110612eae57fe5b602090810291909101015250600101612e91565b5092915050565b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc5490565b60006001600160a01b0316866001600160a01b031614156040518060600160405280602681526020016140ac6026913990612f6a5760405162461bcd60e51b815260206004820181815283516024840152835190928392604490910191908501908083836000831561195a578181015183820152602001611942565b5060006001600160a01b0316856001600160a01b031614156040518060600160405280602481526020016141d56024913990612fe75760405162461bcd60e51b815260206004820181815283516024840152835190928392604490910191908501908083836000831561195a578181015183820152602001611942565b50612ff68787878787876135b3565b6130048787878787876137df565b61301387878787878787613a74565b50505050505050565b6001600160a01b038216600090815260056020526040812054819081906060613044876115c1565b905060005b815181101561314357600080600084848151811061306357fe5b60200260200101516001600160a01b0316639b2e48bc308d8d6040518463ffffffff1660e01b815260040180846001600160a01b03168152602001836001600160a01b03168152602001828152602001935050505060606040518083038186803b1580156130d057600080fd5b505afa1580156130e4573d6000803e3d6000fd5b505050506040513d60608110156130fa57600080fd5b5080516020820151604090920151909450909250905061311a868461316c565b95506131268883613f22565b97506131328782613f22565b965050600190920191506130499050565b506131616131518585613f7c565b61315b84876131d1565b9061316c565b945050509250925092565b60008282018183128015906131815750838112155b80613196575060008312801561319657508381125b611aab5760405162461bcd60e51b815260040180806020018281038252602181526020018061411c6021913960400191505060405180910390fd5b60008183038183128015906131e65750838113155b806131fb57506000831280156131fb57508381135b611aab5760405162461bcd60e51b81526004018080602001828103825260248152602001806142516024913960400191505060405180910390fd5b6001600160a01b03811661327b5760405162461bcd60e51b81526004018080602001828103825260268152602001806140866026913960400191505060405180910390fd5b600080546040516001600160a01b03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a3600080546001600160a01b0319166001600160a01b0392909216919091179055565b600154600090819081906012600160a01b90910460ff161015613320575060015460ff600160a01b909104811660120316600a0a80848161331357fe5b0492508083029150613362565b6001546012600160a01b90910460ff16111561335b57505060015460111960ff600160a01b90920482160116600a0a82810291508290613362565b8391508192505b50915091565b6001600160a01b0384166133ad5760405162461bcd60e51b81526004018080602001828103825260228152602001806142c96022913960400191505060405180910390fd5b6133bc858560008686866135b3565b826133c685611a89565b10156134035760405162461bcd60e51b815260040180806020018281038252602781526020018061405f6027913960400191505060405180910390fd5b6001600160a01b03841660009081526005602052604090205461342690846131d1565b60056000866001600160a01b03166001600160a01b0316815260200190815260200160002081905550836001600160a01b0316856001600160a01b03167fa78a9be3a7b862d26933ad85fb11d80ef66b8f972d7cbba06621d583943a4098858585604051808481526020018060200180602001838103835285818151815260200191508051906020019080838360005b838110156134ce5781810151838201526020016134b6565b50505050905090810190601f1680156134fb5780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b8381101561352e578181015183820152602001613516565b50505050905090810190601f16801561355b5780820380516001836020036101000a031916815260200191505b509550505050505060405180910390a36040805184815290516000916001600160a01b038716917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9181900360200190a35050505050565b6040805163555ddc6560e11b81526001600160a01b03871660048201527f29ddb589b1fb5fc7cf394961c1adf5f8c6454761adf795e67fe149f658abe89560248201529051600091731820a4b7618bde71dce8cdc73aab6c95905fad249163aabbb8ca91604480820192602092909190829003018186803b15801561363757600080fd5b505afa15801561364b573d6000803e3d6000fd5b505050506040513d602081101561366157600080fd5b505190506001600160a01b0381161561301357806001600160a01b03166375ab97828888888888886040518763ffffffff1660e01b815260040180876001600160a01b03168152602001866001600160a01b03168152602001856001600160a01b031681526020018481526020018060200180602001838103835285818151815260200191508051906020019080838360005b8381101561370c5781810151838201526020016136f4565b50505050905090810190601f1680156137395780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b8381101561376c578181015183820152602001613754565b50505050905090810190601f1680156137995780820380516001836020036101000a031916815260200191505b5098505050505050505050600060405180830381600087803b1580156137be57600080fd5b505af11580156137d2573d6000803e3d6000fd5b5050505050505050505050565b826137e986611a89565b10156138265760405162461bcd60e51b815260040180806020018281038252602b8152602001806141f9602b913960400191505060405180910390fd5b6001600160a01b03851660009081526005602052604090205461384990846131d1565b6001600160a01b038087166000908152600560205260408082209390935590861681522054613878908461316c565b60056000866001600160a01b03166001600160a01b0316815260200190815260200160002081905550836001600160a01b0316856001600160a01b0316876001600160a01b03167f06b541ddaa720db2b10a4d0cdac39b8d360425fc073085fac19bc82614677987868686604051808481526020018060200180602001838103835285818151815260200191508051906020019080838360005b8381101561392a578181015183820152602001613912565b50505050905090810190601f1680156139575780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b8381101561398a578181015183820152602001613972565b50505050905090810190601f1680156139b75780820380516001836020036101000a031916815260200191505b509550505050505060405180910390a4836001600160a01b0316856001600160a01b03167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef856040518082815260200191505060405180910390a3505050505050565b60008184841115613a6c5760405162461bcd60e51b815260206004820181815283516024840152835190928392604490910191908501908083836000831561195a578181015183820152602001611942565b505050900390565b6040805163555ddc6560e11b81526001600160a01b03871660048201527fb281fc8c12954d22544db45de3159a39272895b169a852b314f9cc762e44c53b60248201529051600091731820a4b7618bde71dce8cdc73aab6c95905fad249163aabbb8ca91604480820192602092909190829003018186803b158015613af857600080fd5b505afa158015613b0c573d6000803e3d6000fd5b505050506040513d6020811015613b2257600080fd5b505190506001600160a01b03811615613c9b57806001600160a01b03166223de298989898989896040518763ffffffff1660e01b815260040180876001600160a01b03168152602001866001600160a01b03168152602001856001600160a01b031681526020018481526020018060200180602001838103835285818151815260200191508051906020019080838360005b83811015613bcc578181015183820152602001613bb4565b50505050905090810190601f168015613bf95780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b83811015613c2c578181015183820152602001613c14565b50505050905090810190601f168015613c595780820380516001836020036101000a031916815260200191505b5098505050505050505050600060405180830381600087803b158015613c7e57600080fd5b505af1158015613c92573d6000803e3d6000fd5b50505050611a10565b8115611a1057613cb3866001600160a01b0316613f92565b15611a105760405162461bcd60e51b81526004018080602001828103825260288152602001806142756028913960400191505060405180910390fd5b6001600160a01b038416613d4a576040805162461bcd60e51b815260206004820181905260248201527f5375706572546f6b656e3a206d696e7420746f207a65726f2061646472657373604482015290519081900360640190fd5b6001600160a01b038416600090815260056020526040902054613d6d908461316c565b6001600160a01b038516600090815260056020526040812091909155613d9a908690868686866001613a74565b836001600160a01b0316856001600160a01b03167f2fe5be0146f74c5bce36c0b80911af6c7d86ff27e89d5cfa61fc681327954e5d858585604051808481526020018060200180602001838103835285818151815260200191508051906020019080838360005b83811015613e19578181015183820152602001613e01565b50505050905090810190601f168015613e465780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b83811015613e79578181015183820152602001613e61565b50505050905090810190601f168015613ea65780820380516001836020036101000a031916815260200191505b509550505050505060405180910390a36040805184815290516001600160a01b038616916000917fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef9181900360200190a35050505050565b7f360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc55565b600082820183811015611aab576040805162461bcd60e51b815260206004820152601b60248201527f536166654d6174683a206164646974696f6e206f766572666c6f770000000000604482015290519081900360640190fd5b6000818310613f8b5781611aab565b5090919050565b6000813f7fc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470818114801590611373575050151592915050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061400c5782800160ff19823516178555614039565b82800160010185558215614039579182015b8281111561403957823582559160200191906001019061401e565b50614045929150614049565b5090565b5b80821115614045576000815560010161404a56fe5375706572546f6b656e3a206275726e20616d6f756e7420657863656564732062616c616e63654f776e61626c653a206e6577206f776e657220697320746865207a65726f20616464726573735375706572546f6b656e3a207472616e736665722066726f6d207a65726f20616464726573735375706572546f6b656e3a20617574686f72697a696e672073656c66206173206f70657261746f7253463a204f6e6c79206c6973746564206167726565656d656e7420616c6c6f7765645369676e6564536166654d6174683a206164646974696f6e206f766572666c6f775375706572546f6b656e3a20617070726f76652066726f6d207a65726f20616464726573735375706572546f6b656e3a20617070726f766520746f207a65726f206164647265737353463a204f6e6c7920686f737420636f6e747261637420616c6c6f77656400005375706572546f6b656e3a2063616c6c6572206973206e6f7420616e206f70657261746f7220666f7220686f6c6465725375706572546f6b656e3a207472616e7366657220746f207a65726f20616464726573735375706572546f6b656e3a207472616e7366657220616d6f756e7420657863656564732062616c616e63655375706572546f6b656e3a207472616e7366657220616d6f756e74206578636565647320616c6c6f77616e63655369676e6564536166654d6174683a207375627472616374696f6e206f766572666c6f775375706572546f6b656e3a206e6f7420616e20455243373737546f6b656e73526563697069656e745375706572546f6b656e3a20646f776e677261646520616d6f756e7420657863656564732062616c616e63655375706572546f6b656e3a206275726e2066726f6d207a65726f2061646472657373a264697066735822122008ec69650d6ec240fe3d8d165e07b0657c56e68949ecff0a203c8deba2fb24d864736f6c63430007010033"
      , owner
    );
    //#endregion
    SF = await SFContract.deploy();
    SFT = await SFTContract.deploy();
    SFCF = await SFCFContract.deploy();
    console.log("SF address: " + SF.address)
    console.log("SFT address: " + SFT.address)
    console.log("SFCF address: " + SFT.address)
    // console.log(SFCF.functions) //checking that everything pulled through correctly 
    
    // const dai = await SF.contracts.TestToken.at(daiAddress); // this step is minting dai
    const daixWrapper = await SF.getERC20Wrapper(Dai.address, "Dai");
    //const daix = await SF.contracts.ISuperToken.at(daixWrapper.wrapperAddress); //what is this function doing? minting supertoken?

    SFCF.createFlow(Dai.address,bidder,"385802469135802", "0x")
  });

  it("check flow", async () => {
    const balBidder = (await Dai.balanceOf(bidder.getAddress())).toString() /1e18
    console.log("Bidder balance: " + balBidder)
  });

  xit("initiate project, bid, and then approval", async function () {
    //create project to be bid on
    await BidFactory.connect(owner).deployNewProject(
      owner.getAddress(),
      CT.address,
      "Honduras Agriculture Project",
      "Milestone1; Milestone2; Milestone3",
      [ethers.BigNumber.from("3"),ethers.BigNumber.from("6"),ethers.BigNumber.from("9")],
      [ethers.BigNumber.from("300"),ethers.BigNumber.from("600"),ethers.BigNumber.from("900")]
    );

    const lawproject = await BidFactory.getProject("Honduras Agriculture Project");
    console.log("Project owner terms deployed with new bid tracker")
    console.log(lawproject)

    const lawProjectContract = new ethers.Contract(
      lawproject.projectAddress,
        abiNeg,
        owner
      );

    await lawProjectContract.connect(bidder).newBidderTerms(
        [ethers.BigNumber.from("4"),ethers.BigNumber.from("6"),ethers.BigNumber.from("9")],
        [ethers.BigNumber.from("400"),ethers.BigNumber.from("600"),ethers.BigNumber.from("900")])

    const bidderterms = await lawProjectContract.connect(owner).loadBidderTerms(bidder.getAddress())
    console.log("bidder address: ", await bidder.getAddress());
  });

  xit("testing data oracle", async () => {
    //need to setup a new contract that acts as the data oracle on chain, so that it can be replaced if neccessary.     
  })
});

